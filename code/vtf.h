/* date = November 2nd 2022 2:22 pm */

#ifndef VTF_H
#define VTF_H
#define VTF_SIGNATURE FOURCC_TO_INT('V', 'T', 'F', 0)

enum
{
	VTF_FORMAT_NONE = -1,
	VTF_FORMAT_RGBA8888 = 0,
	VTF_FORMAT_ABGR8888,
	VTF_FORMAT_RGB888,
	VTF_FORMAT_BGR888,
	VTF_FORMAT_RGB565,
	VTF_FORMAT_I8,
	VTF_FORMAT_IA88,
	VTF_FORMAT_P8,
	VTF_FORMAT_A8,
	VTF_FORMAT_RGB888_BLUESCREEN,
	VTF_FORMAT_BGR888_BLUESCREEN,
	VTF_FORMAT_ARGB8888,
	VTF_FORMAT_BGRA8888,
	VTF_FORMAT_DXT1,
	VTF_FORMAT_DXT3,
	VTF_FORMAT_DXT5,
	VTF_FORMAT_BGRX8888,
	VTF_FORMAT_BGR565,
	VTF_FORMAT_BGRX5551,
	VTF_FORMAT_BGRA4444,
	VTF_FORMAT_DXT1_ONEBITALPHA,
	VTF_FORMAT_BGRA5551,
	VTF_FORMAT_UV88,
	VTF_FORMAT_UVWQ8888,
	VTF_FORMAT_RGBA16161616F,
	VTF_FORMAT_RGBA16161616,
	VTF_FORMAT_UVLX8888
};

enum CompiledVtfFlags
{
	TEXTUREFLAGS_POINTSAMPLE       = 0x1,
	TEXTUREFLAGS_TRILINEAR         = 0x2,
	TEXTUREFLAGS_CLAMPS            = 0x4,
	TEXTUREFLAGS_CLAMPT            = 0x8,
	TEXTUREFLAGS_ANISOTROPIC       = 0x10,
	TEXTUREFLAGS_HINT_DXT5         = 0x20,
	TEXTUREFLAGS_PWL_CORRECTED     = 0x40,
	TEXTUREFLAGS_NORMAL            = 0x80,
	TEXTUREFLAGS_NOMIP             = 0x100,
	TEXTUREFLAGS_NOLOD             = 0x200,
	TEXTUREFLAGS_ALL_MIPS          = 0x400,
	TEXTUREFLAGS_PROCEDURAL        = 0x800,
	TEXTUREFLAGS_ONEBITALPHA       = 0x1000,
	TEXTUREFLAGS_EIGHTBITALPHA     = 0x2000,
	TEXTUREFLAGS_ENVMAP            = 0x4000,
	TEXTUREFLAGS_RENDERTARGET      = 0x8000,
	TEXTUREFLAGS_DEPTHRENDERTARGET = 0x10000,
	TEXTUREFLAGS_NODEBUGOVERRIDE   = 0x20000,
	TEXTUREFLAGS_SINGLECOPY        = 0x40000,
	TEXTUREFLAGS_PRE_SRGB          = 0x80000,
	TEXTUREFLAGS_UNUSED_00100000   = 0x100000,
	TEXTUREFLAGS_UNUSED_00200000   = 0x200000,
	TEXTUREFLAGS_UNUSED_00400000   = 0x400000,
	TEXTUREFLAGS_NODEPTHBUFFER     = 0x800000,
	TEXTUREFLAGS_UNUSED_01000000   = 0x1000000,
	TEXTUREFLAGS_CLAMPU            = 0x2000000,
	TEXTUREFLAGS_VERTEXTEXTURE     = 0x4000000,
	TEXTUREFLAGS_SSBUMP            = 0x8000000,
	TEXTUREFLAGS_UNUSED_10000000   = 0x10000000,
	TEXTUREFLAGS_BORDER            = 0x20000000,
	TEXTUREFLAGS_UNUSED_40000000   = 0x40000000,
	TEXTUREFLAGS_UNUSED_80000000   = 0x80000000,
};

// vtf version 7.1
#pragma pack(push, 1)
typedef struct
{
	u32 signature;
    u32 version[2];
    u32 headerSize;
    u16 width;
    u16 height;
    u32 flags;
    u16 frames;
    u16 firstFrame;
    u8 padding0_[4];
	v3 reflectivity;
    u8 padding1_[4];
    f32 bumpmapScale;
    u32 highResImageFormat;
    u8 mipmapCount;
    u32 lowResImageFormat; // always DXT1
    u8 lowResImageWidth;
    u8 lowResImageHeight;
	u8 padding2_; // pad to 64 bytes
	//u8 padding2_[17]; // pad to 80 bytes
} VtfHeader;
#pragma pack(pop)

#endif //VTF_H
